.mode csv
.import shakespeare_data.csv import
.schema
select * from import limit 10;
select count(*) from import;
create table plays (rowid integer primary key, play, linenumber, act, scene, line, player, text);
.schema
insert into plays select Dataline as rowid, play, playerlinenumber as linenumber, substr(actsceneline, 1, 1) as act, substr(actsceneline, 3, 1) as scene, substr(actsceneline, 5, 5) as line, player, playerline as text from import;
select * from plays limit 10;
create virtual table playsearch using fts5(playsrowid, text);
insert into playsearch select rowid, text from plays;
select * from playsearch where text match "whether tis nobler";
select play, act, scene, line, player, plays.text from playsearch inner join plays on playsearch.playsrowid = plays.rowid where playsearch.text match "whether tis nobler";
drop table import;
vacuum;
